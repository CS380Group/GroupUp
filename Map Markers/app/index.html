
<!--DOCTYPE html-->
<html>
  <head>
    <title>Testing googlemaps</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 80%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    
    <!--Places Map on page-->
    <form action="/action_page.php">
      <label for="userName">Name</label><br>
      <input type="text" id="userName" name="userName" value="John"><br><br>
      
      <label for="userTitle">Event Title</label><br>
      <input type="text" id="userTitle" name="userTitle" value="Basketball Game"><br><br>
      
      <label for="userAddress">Address</label><br>
      <input type="text" id="userAdress" name="UserAdress" value="400 e University way"><br><br>
      
      <label for="userCity">City</label><br>
      <input type="text" id="userCity" name="userCity" value="Ellensburg"><br><br>
      
      <label for="userState">State</label><br>
        <select name="state" id="state">
          <option value="AL">Alabama</option>
          <option value="AK">Alaska</option>
          <option value="AZ">Arizona</option>
          <option value="AR">Arkansas</option>
          <option value="CA">California</option>
          <option value="CO">Colorado</option>
          <option value="CT">Connecticut</option>
          <option value="DE">Delaware</option>
          <option value="DC">District Of Columbia</option>
          <option value="FL">Florida</option>
          <option value="GA">Georgia</option>
          <option value="HI">Hawaii</option>
          <option value="ID">Idaho</option>
          <option value="IL">Illinois</option>
          <option value="IN">Indiana</option>
          <option value="IA">Iowa</option>
          <option value="KS">Kansas</option>
          <option value="KY">Kentucky</option>
          <option value="LA">Louisiana</option>
          <option value="ME">Maine</option>
          <option value="MD">Maryland</option>
          <option value="MA">Massachusetts</option>
          <option value="MI">Michigan</option>
          <option value="MN">Minnesota</option>
          <option value="MS">Mississippi</option>
          <option value="MO">Missouri</option>
          <option value="MT">Montana</option>
          <option value="NE">Nebraska</option>
          <option value="NV">Nevada</option>
          <option value="NH">New Hampshire</option>
          <option value="NJ">New Jersey</option>
          <option value="NM">New Mexico</option>
          <option value="NY">New York</option>
          <option value="NC">North Carolina</option>
          <option value="ND">North Dakota</option>
          <option value="OH">Ohio</option>
          <option value="OK">Oklahoma</option>
          <option value="OR">Oregon</option>
          <option value="PA">Pennsylvania</option>
          <option value="RI">Rhode Island</option>
          <option value="SC">South Carolina</option>
          <option value="SD">South Dakota</option>
          <option value="TN">Tennessee</option>
          <option value="TX">Texas</option>
          <option value="UT">Utah</option>
          <option value="VT">Vermont</option>
          <option value="VA">Virginia</option>
          <option value="WA" selected>Washington</option>
          <option value="WV">West Virginia</option>
          <option value="WI">Wisconsin</option>
          <option value="WY">Wyoming</option>
        </select><br><br>
      
      <form action="">
        <input type="button" id="myButton" value="Submit" />
      </form>
    </form> 
    
    <div id="map"></div>
     
    <p id="test">
      
    </p>
    
    
    
    <script>
      //get a reference to the element
      var myBtn = document.getElementById('myButton');

      //add event listener
      myBtn.addEventListener('click', function(event) {
        window.location.href='index2.html';
      });
      
      
      //Values
      var geocoder;
      var map;
      var userName = ["Lucy",
                 "Derrick",
                 "Josh",
                 "Steven",
                 "Amanda",
                 "Patrick",
                 "Will"];
      
      var description = ["Soccer Game",
                 "Looking for D&D Group",
                 "Community Service",
                 "Park Event",
                 "Job Opportunity",
                 "New Business Open",
                 "Ultimate Frisbee"];
      
      var address = ["801 e 18th ave",
                     "1081 umptanum rd",
                     "1300 e 3rd ave",
                     "400 w washington ave",
                     "805 n main st",
                     "608 e mountain view ave",
                     "1518 w university way"];
      
      var city = "Ellensburg" ;
      var state = "WA";
      
      
      //Main Body 
      function initMap() {
        geocoder =  new google.maps.Geocoder();
        geocoder.geocode( { 'address': city}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            //alert(results[0].geometry.location)
            var latlng = results[0].geometry.location;
            var mapOptions = {
              zoom: 13,
              center: latlng,
              gestureHandling: 'greedy'
            };
            map = new google.maps.Map(document.getElementById('map'), mapOptions);
            
            
            //Loop for placing Markers
            for(var i=0; i<address.length; i++){
              
              var spot = address[i];
              var nam = userName[i];
              var descrip = description[i];
              codeAddress(geocoder, map, spot, nam, descrip);
            }  
          }else{
            //alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      }
           
      //Places Markers
      function codeAddress(geocoder, map, spot, nam, descrip) {
        //document.getElementById("test").innerHTML = nam;
        geocoder.geocode({'address': spot + ", " + city + " " + state}, function(results, status) {
          if (status === 'OK') {
            var infowindow = new google.maps.InfoWindow();
            var marker = new google.maps.Marker({
              map: map,
              position: results[0].geometry.location,
              title: spot
            });
            google.maps.event.addListener(marker, 'click', (function(marker) {
                var contentString = '<div id="infoWindow">'
                    +'<div id="bodyContent">'
                    +'<p>'
                    + "Name: " + nam + "<br>"
                    + "Event Title: " + descrip + "<br>"
                    + "Address: " + spot + "<br>"
                    + "City: " + city + "<br>"
                    + "State: " + state + "<br>"
                    +'</p>'
                    +'</div>'
                    + '</div>';
              return function() {
                    infowindow.setContent(contentString);
                    infowindow.open(map, marker);
                    google.maps.event.addListener(infowindow, 'click', (function(i){
                        alert("You clicked on the infowindow for" + cityList[i][0]);
                    }));
                }
                })(marker));
          } else {
            //alert('Geocode was not successful for the following reason: ' + status);
          }
        });
      }
      

    </script>
    <script 
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDQP4SoFyVEn1BfUd54sFeVTqodT83NNfo&callback=initMap">
    </script>
  </body>
</html>